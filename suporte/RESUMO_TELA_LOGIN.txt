# Resumo das Dificuldades na Implementação da Tela de Login

## Contexto
A tela de login do projeto FinScore enfrentou diversos desafios durante sua implementação, especialmente relacionados à gestão de sessão, autenticação e integração com bibliotecas externas. Este documento resume as tentativas realizadas, os erros encontrados e sugestões para futuras implementações.

---

## Tentativas Realizadas

### 1. Uso do CookieManager
- **Objetivo:** Gerenciar sessões de usuário utilizando cookies.
- **Problemas:**
  - Função `get_all()` do `CookieManager` gerava `AttributeError`.
  - Pacote `streamlit-js-cookie` não estava disponível no PyPI ou GitHub.
- **Ação Tomada:**
  - Substituição do `CookieManager` por `st.session_state` para gerenciar sessões diretamente no Streamlit.

### 2. Gerenciamento de Sessão com `st.session_state`
- **Objetivo:** Substituir cookies por uma solução nativa do Streamlit.
- **Problemas:**
  - Necessidade de adaptar funções como `store_session`.
  - Remoção de dependências de cookies gerou erros de importação em `guards.py` e `auth.py`.
- **Ação Tomada:**
  - Ajuste das funções para utilizar apenas `st.session_state`.
  - Remoção de referências a `_get_cookie_manager` e `COOKIE_TOKEN_KEY`.

### 3. Atualização de Funções Depreciadas
- **Problema:** Uso de `st.experimental_rerun`, que foi depreciado.
- **Ação Tomada:** Substituição por `st.rerun` em todos os arquivos relevantes.

### 4. Integração com `bcrypt` e `passlib`
- **Problema:** Incompatibilidade entre versões do `bcrypt` e `passlib`, causando `AttributeError`.
- **Ação Sugerida:**
  - Verificar versões compatíveis no `requirements.txt`.
  - Testar alternativas como `argon2` para hashing de senhas.

---

## Erros Encontrados
- **ImportError:**
  - Funções como `_get_cookie_manager` não definidas após remoção do `CookieManager`.
- **Depreciação:**
  - Uso de funções como `st.experimental_rerun`.
- **Incompatibilidade de Pacotes:**
  - Erros ao utilizar `bcrypt` e `passlib` juntos.

---

## Sugestões para Futuras Implementações

1. **Planejamento de Dependências:**
   - Garantir que todas as bibliotecas utilizadas sejam compatíveis entre si.
   - Testar versões específicas antes de adicioná-las ao `requirements.txt`.

2. **Gestão de Sessão:**
   - Continuar utilizando `st.session_state` para simplificar o gerenciamento de estado no Streamlit.
   - Explorar soluções externas apenas se necessário, como JWT para autenticação.

3. **Interface de Usuário:**
   - Melhorar o design da tela de login para torná-la mais intuitiva e visualmente agradável.
   - Utilizar bibliotecas CSS ou frameworks como Bootstrap para estilização.

4. **Testes Automatizados:**
   - Implementar testes para validar fluxos de autenticação e gerenciamento de sessão.
   - Garantir que mudanças futuras não quebrem funcionalidades existentes.

---

Este resumo pode ser utilizado como base para futuros prompts de construção ou melhorias na tela de login.